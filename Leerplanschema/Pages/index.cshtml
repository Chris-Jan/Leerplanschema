@using WebMatrix.Data;

@{
    Database db = Database.OpenConnectionString(Functions.connectionstring, Functions.provider);


    var test = db.Query("SELECT [Studie_onderdelen].leerjaar, [Studie_onderdelen].periode, [Toets].weging FROM [Studie_onderdelen] INNER JOIN [Toets] ON [Studie_onderdelen].onderdeelID = [Toets].studieonderdeel WHERE onderdeelID = 1 ");



    var studieOpleiding = Request.Form["AddOpleiding"];
    var studieCrohonummer = Convert.ToInt32(Request.Form["AddCroNummer"]);
    var studieniveau = Request.Form["AddNiveau"];
    var studieVariant = Request.Form["AddVariant"];
    var studieFlexOnd = Request.Form["AddFlexOnd"];
    var studieVraFin = Request.Form["AddVraFin"];
    var studieVerTra = Request.Form["AddVerTra"];
    var studieSpeTra = Request.Form["AddSpeTra"];
    var studieVesPla = Request.Form["AddVesPla"];
    var studieJaar = "";

    var leerjaar = Convert.ToInt32(Request.Form["leerjaar"]);
    var periode = Convert.ToInt32(Request.Form["periode"]);
    var onderdeelnaam = Request.Form["fsm"];
    var codeleerjaar = Request.Form["cflm"];
    var codeonderwijseenheid = Request.Form["conderwijs"];
    var coordinator = Request.Form["Coördinator"];
    var keuze = Request.Form["keuze"];
    var vak = Request.Form["titel"];
    var ec = Convert.ToInt32(Request.Form["studiepunten"]);
    var uitkerenhoofdvak = Request.Form["hoofdvak"];
    var wijzewaardering = Request.Form["waardering"];
    var slagingsnormond = Request.Form["slagingsnorm"];
    var woordbeoordeeldond = Request.Form["beoordeeld"];
    var geldigvanaf = Request.Form["vanaf"];
    var geldigtm = Request.Form["totmet"];
    var toetscode = Request.Form["codetoets"];
    var toetsnaam = Request.Form["titeltoets"];
    var toetswijze = Request.Form["wijze"];
    var toetsduur = Convert.ToInt32(Request.Form["toetsduur"]);
    var waardering = Request.Form["wijzewaardering"];
    var slagingnsnorm = Request.Form["slagingsnormen"];
    var wordbeoordeeld = Request.Form["wordtbeoordeeld"];
    var weging = Convert.ToInt32(Request.Form["weging"]);
    var toetsmoment1 = Request.Form["toetsmoment1"];
    var toetsmoment2 = Request.Form["toetsmoment2"];
    var volgordelijkheid = Request.Form["volgordelijkheid"];
    var taal = Request.Form["taal"];
    var eindwerk = Request.Form["eindwerk"];
    var examinator = Request.Form["examinator"];

    if (IsPost && Request.Form["ICT"] == "HBO-ICT")
    {

        studieJaar = db.QueryValue("SELECT leerjaar.studiejaar FROM [Leerjaar] WHERE leerjaar.leerjaarID = 3");
      
    }

    if (IsPost && Request.Form["ITSM"] == "AD-ITSM")
    {
        studieJaar = db.QueryValue("SELECT leerjaar.studiejaar FROM [Leerjaar] WHERE leerjaar.leerjaarID = 2");
    }

    if (IsPost && Validation.IsValid() && Request.Form["submit"] == "Login")
    {
        Validation.RequireField("username", "Er moet een gebruikersnaam worden ingevuld");
        Validation.RequireField("password", "Er moet een wachtwoord in worden gevuld");
        var username = Request.Form["username"];
        var password = Request.Form["password"];

        if (Functions.Login(username, password))
        {
            //You've successfully logged in (pop up verdwijnen)
        }
        else
        {
            Validation.AddFormError("Onjuiste gebruikersnaam en/of wachtwoord ingevoerd");
        }
    }

    if (IsPost && Request.Form["addOverzicht"] == "Toevoegen")
    {
        Functions.AddOverzicht(studieOpleiding, studieCrohonummer, studieniveau, studieVariant, studieFlexOnd, studieVraFin, studieVerTra, studieSpeTra, studieVesPla);
    }
    if (IsPost && Request.Form["SchemaAdd"] == "Add")
    {
        Functions.InsertTable(leerjaar, periode, onderdeelnaam, codeleerjaar, codeonderwijseenheid, coordinator, keuze, vak, ec, uitkerenhoofdvak, wijzewaardering, slagingsnormond, woordbeoordeeldond, geldigvanaf, geldigtm, toetscode, toetsnaam, toetswijze, toetsduur, waardering, slagingnsnorm, wordbeoordeeld, weging, toetsmoment1, toetsmoment2, volgordelijkheid, taal, eindwerk, examinator);
    }
}
@test <br />


      <form  method="post">
          <input type="submit" name="ICT" value="HBO-ICT" />
          <input type="submit" name="ITSM" value="AD-ITSM" />
          <input type="submit" name="Emmen" value="studie 3" />
      </form>





<form method="post">
    <input type="text" name="username" />
    <input type="password" name="password" />
    <input type="submit" name="submitLogin" value="" />



    <table class="table table-light">
        <thead class="thead-dark">
            <tr>
                <th scope="col"></th>
                <th scope="col">Fase / Leerjaar / Module</th>
                <th scope="col">Code: fase/leerjaar/module</th>
                <th scope="col">Code: Onderwijseenheid</th>
                <th scope="col">Coördinator</th>
                <th scope="col">Keuze/Verplicht</th>
                <th scope="col">Titel: Onderwijseenheid NL/EN</th>
                <th scope="col">Studiepunten</th>
                <th scope="col">Uitkeren op hoofdvak</th>
                <th scope="col">Wijze van waardering</th>
                <th scope="col">Slagingsnorm</th>
                <th scope="col">Woord beoordeeling ja/nee</th>
                <th scope="col">Geldig vanaf:</th>
                <th scope="col">Gelding t/m</th>
                <th scope="col">Code toets</th>
                <th scope="col">Titel toets</th>
                <th scope="col">Wijze van toetsing</th>
                <th scope="col">Toetsduur</th>
                <th scope="col">Wijze van waardering</th>
                <th scope="col">Slagingsnorm</th>
                <th scope="col">Woord beoordeling ja/nee</th>
                <th scope="col">Weging</th>
                <th scope="col">Toetsmoment 1</th>
                <th scope="col">Toetsmoment 2</th>
                <th scope="col">Volgordelijkheid</th>
                <th scope="col">Taal</th>
                <th scope="col">Kladwerk ja/nee</th>
                <th scope="col">Examinator</th>
            </tr>

        </thead>
        <tbody>
            @*@foreach (var row in  )
                {

                }*@
            <tr>
                <td><input type="button" name="AddRow" value="+" /></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</form>
<form method="post">
    <input type="text" name="leerjaar" value="" />
    <input type="text" name="periode" value="" />
    <input type="text" name="fsm" value="" />
    <input type="text" name="cflm" value="" />
    <input type="text" name="conderwijs" value="" />
    <input type="text" name="Coördinator" value="" />
    <input type="text" name="keuze" value="" />
    <input type="text" name="titel" value="" />
    <input type="text" name="studiepunten" value="" />
    <input type="text" name="hoofdvak" value="" />
    <input type="text" name="waardering" value="" />
    <input type="text" name="slagingsnorm" value="" />
    <input type="text" name="beoordeeld" value="" />
    <input type="text" name="vanaf" value="" />
    <input type="text" name="totmet" value="" />
    <input type="text" name="codetoets" value="" />
    <input type="text" name="titeltoets" value="" />
    <input type="text" name="wijze" value="" />
    <input type="text" name="toetsduur" value="" />
    <input type="text" name="wijzewaardering" value="" />
    <input type="text" name="slagingsnormen" value="" />
    <input type="text" name="wordtbeoordeeld" value="" />
    <input type="text" name="weging" value="" />
    <input type="text" name="toetsmoment1" value="" />
    <input type="text" name="toetsmoment2" value="" />
    <input type="text" name="volgordelijkheid" value="" />
    <input type="text" name="taal" value="" />
    <input type="text" name="kladwerk" value="" />
    <input type="text" name="examinator" value="" />
    <input type="submit" name="SchemaAdd" value="Add" />
</form>


<form method="post">
    <table class="table table-light">
        <thead class="thead-dark">
            <tr>
                <th scope="col">LEERPLAN</th>
                <td> @studieJaar</td>
            </tr>
            <tr>
                <th scope="col">Opleiding</th>
                <td> @studieOpleiding</td>
                <td><input type="text" name="AddOpleiding" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Croho-nummer</th>
                <td> @studieCrohonummer</td>
                <td><input type="text" name="AddCroNummer" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Niveau</th>
                <td> @studieniveau</td>
                <td><input type="text" name="AddNiveau" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Variant</th>
                <td> @studieVariant</td>
                <td><input type="text" name="AddVariant" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Flexibel onderwijs</th>
                <td> @studieFlexOnd</td>
                <td><input type="text" name="AddFlexOnd" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Vraag financiering</th>
                <td> @studieVraFin</td>
                <td><input type="text" name="AddVraFin" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Versneld traject</th>
                <td> @studieVerTra</td>
                <td><input type="text" name="AddVerTra" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Speciaal traject</th>
                <td> @studieSpeTra</td>
                <td><input type="text" name="AddSpeTra" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <th scope="col">Vestigings plaatsen</th>
                <td> @studieVesPla</td>
                <td><input type="text" name="AddVesPla" placeholder="Naam opleiding..." value="" /></td>
            </tr>
            <tr>
                <button name="addOverzicht" value="Toevoegen">Toevoegen</button>
            </tr>
    </table>
</form>
